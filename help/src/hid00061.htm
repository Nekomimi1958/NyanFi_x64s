<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
  <title>文字列置換</title>
  <link rel="stylesheet" type="text/css" href="help.css">
  <object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
    <param name="Keyword" value="GREP">
    <param name="Keyword" value="正規表現">
    <param name="Keyword" value="文字列置換">
  </object>
</head>

<body>

  <h1>文字列置換</h1>
  <p>
    <a href="hid00005.htm#Grep">Grep</a>/<a href="hid00005.htm#Grep2">Grep2</a> コマンドで開く <a href="hid00056.htm">文字列検索(GREP)</a>画面で、上部のタブを<span class="tab_frame">置換</span>に切り替えると<b>文字列置換</b>を行えます。<br>
  </p>

  <h2 id="Replace">文字列置換</h2>
  <p>
    検索対象のテキストファイルに対して文字列置換を行います。<br>
    必用に応じて後述の項目を設定してください。<br>
    カレントで選択項目がある場合は、それらが対象となります。また非表示の項目は対象から外されます。<br>
  </p>
  <p>
    結果リストでは、文字列検索の場合と同様に、カーソル移動やファイル編集などが可能です。<br>
    置換された部分の背景は、強調色の補色で表示されます。<br>
    なお、結果リストの行番号は置換前のものですので、置換文字列に改行が含まれていると、置換後の行とはずれていきます。
  </p>
  <hr class="light">

  <dl>
    <dt class="no_bg_indent1">検索文字列 <img src="edit.png" alt=""></dt>
    <dd>
      検索したい文字列を指定してください。特殊文字として <b>\t</b>、<b>\s</b>、<b>\\</b>が使えます。<br>
      なお、<b>検索文字列</b>または次の<b>置換文字列</b>にフォーカスがある場合、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">R</span>で <a href="#RegEx">正規表現</a>、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">U</span>で <a href="#CaseSens">大小区別</a>、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">W</span>で <a href="#Word">単語</a> のチェック状態を切り替えられます。

      <div class="spc_box">
        <b>フィルタによる検索対象の絞り込み:</b><br>
        <b>&gt;</b><span class="pram_text">フィルタ1[|フィルタ2...]</span><b>&gt;</b> <span class="pram_text">検索文字列</span><br>
        という書式で<b>フィルタ</b>を指定することで、検索対象を絞り込めます(Grep2 では利用不可)。<br>
        文字列置換で利用できるのは、行単位で絞り込みを行うフィルタだけです。<br>
        | で区切って複数のフィルタを指定すると、それらが順に適用されます。なお、フィルタ名の大文字・小文字は区別されません。<br>
        <dl>
          <dt class="no_bg">Head<span class="pram_text">(行数)</span></dt>
          <dd>
            ファイルの先頭から指定した行数だけを検索します。<br>
          </dd>
          <dt class="no_bg">Tail<span class="pram_text">(行数)</span></dt>
          <dd>
            ファイルの最後から指定した行数だけを検索します。<b>Head</b> と組み合わせることで範囲指定も可能です。<br>
          </dd>
          <dt class="no_bg">HtmlHead</dt>
          <dd>
            HTML文書で、head 要素内の行を検索します。<br>
          </dd>
          <dt class="no_bg">HtmlBody</dt>
          <dd>
            HTML文書で、body 要素内の行を検索します。<br>
          </dd>
          <dt class="no_bg">HtmlRem</dt>
          <dd>
            HTML文書で、コメントを含む行を検索します。<br>
            <div class="note_text">
              文字列検索(GREP)とは異なり、行の一部がコメントになっている場合も、その行全体が検索対象になります。<br>
            </div>
          </dd>
          </dl>
      </div>
    </dd>

    <dt class="no_bg_indent1">置換文字列 <img src="edit.png" alt=""></dt>
    <dd>
      検索したい文字列を指定してください。特殊文字として <b>\t</b>、<b>\n</b>、<b>\s</b>、<b>\\</b>が使えます。<br>
      空欄の場合は、マッチした文字列が削除されます。<br>
    </dd>

    <dt class="no_bg_indent1" id="RegEX"><img src="chkbox.png" alt=""> 正規表現</dt>
    <dd>置換に正規表現(PCRE)を用います。なお、検索文字列欄の右クリックメニューから、正規表現を参照したり<a href="hid00085.htm">正規表現チェッカー</a>を開いたりできます。<br>
      入力内容が正しくない場合、検索欄を囲むエラー色の枠が表示されて<span
        class="btn_frame">開始</span>ボタンを押せません。<br>
    </dd>

    <dt class="no_bg_indent1" id="CaseSens"><img src="chkbox.png" alt=""> 大小区別</dt>
    <dd>大文字・小文字を区別して検索します。</dd>

    <dt class="no_bg_indent1" id="Word"><img src="chkbox.png" alt=""> 単語</dt>
    <dd>単語単位で検索します。検索文字列は英単語境界でのみ一致します。</dd>

    <dd>
      結果リスト以外にフォーカスがある場合、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">R</span>で<b>正規表現</b>、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">U</span>で<b>大小区別</b>、<span class="btn_frame">Ctrl</span>+<span class="btn_frame">W</span>で<b>単語</b>のチェック状態を切り替えられます。<br>
    </dd>

    <dt class="no_bg_indent1"><img src="chkbox.png" alt=""> 確認あり</dt>
    <dd>置換を行う前に確認ダイアログが表示されます。そこで「<b>全て置換</b>」を選ぶと、以降の全ファイルに対して確認なしで置換が実行されます。</dd>
  </dl>
  <hr class="light">
  <br>

  <p id="Option">
    <span class="btn_frame">拡張設定</span>ボタンを押すと、<b>拡張設定</b>ダイアログが開きます。
  </p>

  <dl>
    <dt><img src="grpbox.png" alt=""> 置換</dt>
    <dd></dd>
    <dt class="no_bg_indent1"><img src="grpbox.png" alt=""> 元ファイルのバックアップ</dt>
    <dd></dd>

    <dt class="no_bg_indent1"><img src="chkbox.png" alt=""> バックアップを作成する</dt>
    <dd>チェックしていると、置換したファイルのバックアップが作成されます。<br>
      なお、対象がハードリンクの場合、リンクが切れないようにコピーでバックアップを作成します。<br>
    </dd>

    <dt class="no_bg_indent1">拡張子 <img src="edit.png" alt=""></dt>
    <dd>バックアップファイルの拡張子を指定します。</dd>

    <dt class="no_bg_indent1"><img src="grpbox.png" alt=""> 保存先</dt>
    <dd>バックアップ先のディレクトリを指定します。<br>
      パス指定がないと元ファイルからの相対パスとみなされます。また空欄の場合は、元ファイルと同じディレクトリになります。<br>
      <br>
    </dd>

    <dt class="no_bg_indent1"><img src="grpbox.png" alt=""> 結果ログ</dt>
    <dd>置換終了時に結果リストをログとしてファイルに出力したり、それをテキストエディタで開いたりできます。<br>
      ログファイルはUnicode(UTF-8 BOM付き)で保存されます。
    </dd>

    <dt><img src="grpbox.png" alt=""> 出力形式</dt>
    <dd>文字列置換の場合と同じように、ログの出力形式を設定できます。</dd>

  </dl>
  <br><br>

</body>

</html>